# S02 - lexical-conventions, lists, literals, magicals, names, types

- [x] roast/S02-lexical-conventions/bom.t
- [ ] roast/S02-lexical-conventions/comments.t
  - Tests 8-10 fail: `'a'..'c'` Range assigned to Array not properly reified on indexing
  - Tests 23-26 fail: `throws-like` does not detect expected compilation errors for invalid embedded comments
  - Tests 29+ fail: multi-character bracket delimiters (`#`<<...>>`, `#`{{...}}`) not supported in embedded comments
- [x] roast/S02-lexical-conventions/finish-pod.t
- [ ] roast/S02-lexical-conventions/minimal-whitespace.t
  - 4/18 pass (tests 4-7, 12). Failures: space before `[`/`{` in array/hash constructors not rejected; postfix whitespace rules (`i`, `++`) not enforced; `[+]` without whitespace should die; colonpair after dot-digit not rejected
- [ ] roast/S02-lexical-conventions/one-pass-parsing.t
  - 3/5 pass. Test 3: calling sub `if` without parens should parsefail (keyword disambiguation). Test 5: keyword `if` without following whitespace should fail
- [x] roast/S02-lexical-conventions/pod-in-multi-line-exprs.t
- [ ] roast/S02-lexical-conventions/sub-block-parsing.t
  - 3/11 pass (tests 1-3). Failures: passing arguments to immediately-invoked `sub {}()`, block parsing with newline/semicolon context, sub/hash disambiguation (`fa`/`fb` old syntax)
- [ ] roast/S02-lexical-conventions/unicode.t
  - 36/44 pass. Failures: Unicode string evaluations in `do {}` blocks (tests 4-5), Unicode sub names with named-params/placeholders (tests 27-30), bracket mapping edge cases (U+298D, U+301D→U+301F)
- [ ] roast/S02-lexical-conventions/unicode-whitespace.t
  - 0/50 pass. Requires `uniprop` function and Unicode whitespace recognition in expressions (OGHAM SPACE MARK, EN QUAD, etc.) and "long dot" contexts. Needs `uniprop($char, "White_Space")` support
- [ ] roast/S02-lexical-conventions/unspace.t
  - Fatal: `Module not found: MONKEY-TYPING`. Requires `use MONKEY-TYPING` pragma
- [ ] roast/S02-lists/indexing.t
  - 0/4 pass. Fatal: `is expects right` — likely `is` called with wrong argument form (possible `is()` parsing issue with list context)
- [ ] roast/S02-lists/tree.t
  - 0/14 pass. Fatal: `is expects right` — same `is()` argument parsing issue
- [ ] roast/S02-literals/adverbs.t
- [ ] roast/S02-literals/allomorphic.t
  - ~43/119 pass. val() type detection works (IntStr, RatStr, NumStr, ComplexStr) but equality checks fail (`eqv` not comparing allomorph parts correctly). Nil in qw/qqww works. Failures: `eqv` on allomorphs (5-6, 10-11, etc.), Rat `~~` check (13, 18), `<...>` vs `qw:v[...]` equivalence (52-53), native parameter passing (54, 56, 58-59), `.raku` on allomorphs (71-72), pre/post decrement (78-80). Difficulty: Medium-High
- [ ] roast/S02-literals/array-interpolation.t
- [ ] roast/S02-literals/autoref.t
- [ ] roast/S02-literals/char-by-name.t
  - 1/11 pass (test 9). `\c[NAME]` unicode character-by-name syntax not implemented. Difficulty: Medium (needs unicode name lookup in string escape parser)
- [ ] roast/S02-literals/char-by-number.t
  - 0/38 pass. `\x`, `\o`, `\c` numeric escape sequences in strings not implemented. Difficulty: Medium (need to add escape sequences in string parser)
- [ ] roast/S02-literals/fmt-interpolation.t
- [ ] roast/S02-literals/format.t
- [ ] roast/S02-literals/hash-interpolation.t
- [ ] roast/S02-literals/heredocs.t
  - 40/42 pass. Tests 39, 42 fail: eval-dies-ok tests for heredoc scoping — heredoc body after closing `}` should not access block-scoped variables, but our lexer inlines the body before scoping is evaluated.
- [x] roast/S02-literals/hex_chars.t
- [ ] roast/S02-literals/listquote.t
  - 9/24 pass (3-4, 6, 11-13, 16, 19, 22). Failures: list context `<list>` evaluation (1), `|<<` listop (2), parsefail detection (5, 7-9, 14-15), immutability of `<>` list (17), numeric allomorph stringify (18), Rat/Complex type in `<>` (21, 23), assignment to list (24). Difficulty: Medium
- [ ] roast/S02-literals/listquote-whitespace.t
- [ ] roast/S02-literals/misc-interpolation.t
- [ ] roast/S02-literals/numeric.t
  - 6/71 pass. Fatal: `is-approx expects expected` — `is-approx` function does not handle all argument forms. Tests cover Int/Num/Real type checks
- [x] roast/S02-literals/pair-boolean.t
  - 6/6 pass.
- [ ] roast/S02-literals/pairs.t
  - ~6/84 pass. Most failures: Pair type introspection (`.key`, `.value`, `:a(42)` colonpair syntax), `isa(Pair)` checks, nested pairs, Pair destructuring, variables as pair keys
- [ ] roast/S02-literals/pod.t
- [ ] roast/S02-literals/quoting.t
  - 17/212 pass (1-2, 7-9, 11, 13, 15-19, 31-35). Panic fixed (UTF-8 boundary in try_meta_op). Crashes at test ~61 with division by zero when parsing `qq:w/.../` (slash delimiter misinterpreted as division). Many quoting adverbs (q:w, qq:ww, Q:q, etc.) not fully supported. Difficulty: High
- [ ] roast/S02-literals/quoting-unicode.t
- [ ] roast/S02-literals/radix.t
  - 1/158 pass. `:10<42>`, `:16<FF>` etc. radix notation not implemented. Only `0xffffffff` hex literal works
- [ ] roast/S02-literals/string-interpolation.t
  - 12/42 pass (7-9, 12-13, 15-16, 19-21, 41-42). Failures: `\01` octal in closures (1-6), `.min`/`.max` method calls in qq[] interpolation (10), `.new` on string literal (11), `\a` alarm escape (14), double-sigil non-interpolation rules (17-18), `throws-like` with `X::Undeclared` (22-40). Difficulty: Medium-High
- [ ] roast/S02-literals/sub-calls.t
  - 10/20 pass (1-2, 5-6, 10-11, 13-14, 19-20). Failures: `.()` dot-call syntax (3-4, 7-8, 15-16), adverb after no space (9, 12), parens after space as grouping not call (17), `$_` method dispatch (18). Difficulty: Medium
- [ ] roast/S02-literals/subscript.t
- [ ] roast/S02-literals/types.t
  - 2/7 pass (2, 6). Failures: class redeclaration error not thrown (1), non-existing class/role compile errors not detected (3-5), post-declaration required error (7). Difficulty: Medium (needs compile-time class/role checks)
- [ ] roast/S02-literals/underscores.t
  - 5/19 pass (tests 1, 11-13, 16). Failures: multiple underscores, leading/trailing underscores, underscore before/after `.`/`e`/`E` should fail; `2._foo` / `2._123` should parse as method calls
- [x] roast/S02-literals/version.t
  - 37/37 pass. Version literals, eqv, ===, ~~, cmp, Version.new().
- [x] roast/S02-magicals/78258.t
  - 1/1 pass.
- [ ] roast/S02-magicals/args.t
  - 4/6 pass. Tests 5-6 fail: `is_run` with `:args[...]` syntax for `@*ARGS` subscript and copy.
- [x] roast/S02-magicals/block.t
  - 3/3 pass.
- [x] roast/S02-magicals/DISTRO.t
  - 28/28 pass. All DISTRO properties populated with real system info.
- [ ] roast/S02-magicals/dollar_bang.t
  - 9/15 pass. Failures: `$!` not set correctly by try blocks (test 1), nonexisting method calls (test 3), wrong-signature calls (test 4), divide-by-zero (test 6), constant modification (test 7), die (test 8), EVAL error value (test 14)
- [ ] roast/S02-magicals/dollar-underscore.t
  - 0/23 pass. Fatal: `is expects right` early abort. `$_` aliasing in bare blocks, if/else/elsif/while/until not working correctly
- [ ] roast/S02-magicals/env.t
  - 7/18 pass. Failures: `%*ENV.keys` (test 1), `%*ENV` rw assignment (test 6), `use MONKEY-SEE-NO-EVAL` required for %ENV tests (tests 9-11), env persistence to child processes (test 14), `.gist`/`.raku` on %*ENV (tests 15-16)
- [x] roast/S02-magicals/file_line.t
- [x] roast/S02-magicals/GROUP.t
  - 1/1 pass.
- [ ] roast/S02-magicals/KERNEL.t
  - 19/42 pass (10-15, 26-31, 33-34, 36-40). `.raku`, `.gist`, `.Str`, signal lookup methods work. Failures: `.name`, `.auth`, `.version`, `.signature`, `.desc`, `.release`, `.hardware`, `.arch`, `.bits`, `.hostname` return wrong values (32: `.signals` list, 35: signal Int defined). Difficulty: Low-Medium (need to populate KERNEL properties)
- [ ] roast/S02-magicals/PERL.t
- [x] roast/S02-magicals/pid.t
- [ ] roast/S02-magicals/progname.t
  - Parse error: `PROCESS::<$PROGRAM>` package variable syntax not supported. Also needs Test::Util/is_run. Regex `'/'` inside delimiter fix applied.
- [ ] roast/S02-magicals/RAKU.t
  - ~8/46 pass (7-10, 17-19, 27). Tests 28-46 not reached. `.raku`, `.gist`, `.compiler.gist`, `.compiler.raku` methods work. Failures: `.name`, `.auth`, `.version`, `.signature`, `.desc`, `.codename`, `.release` return wrong values. Compiler properties not populated. Difficulty: Low-Medium (need to populate RAKU/compiler properties)
- [x] roast/S02-magicals/subname.t
  - 4/4 pass.
- [ ] roast/S02-magicals/sub.t
  - 3/11 pass (4-6). `&?ROUTINE` works inside regex/token/rule. Failures: `&?ROUTINE` in named subs (1), anon subs (2), operator overloads (3), recursive closures (7-10), transparent inner blocks (11). Difficulty: Medium (need `&?ROUTINE` to bind to enclosing sub/method, not just regex)
- [x] roast/S02-magicals/USER.t
  - 1/1 pass.
- [ ] roast/S02-magicals/VM.t
  - 10/32 pass (12-16, 26-30). `.raku`, `.gist`, `.Str` methods work. Failures: `.name`, `.auth`, `.version`, `.signature`, `.desc`, `.config`, `.precomp-ext`, `.precomp-target`, `.prefix`, `.properties` return wrong values. Difficulty: Low-Medium (need to populate VM properties)
- [ ] roast/S02-names/bare-sigil.t
- [ ] roast/S02-names/caller.t
- [ ] roast/S02-names/dynamic-scope.t
- [ ] roast/S02-names/identifier.t
- [ ] roast/S02-names/indirect.t
- [ ] roast/S02-names/is_default.t
- [ ] roast/S02-names/is_dynamic.t
- [ ] roast/S02-names/name.t
  - Tests 1-15 pass (`.VAR.name` on `$`, `@`, `%`, `&` variables)
  - Tests 16-24 fail: require `&[op]` syntax and custom operator definitions (not yet implemented)
  - Tests 25-28 not reached: blocked by parse error in tests 16-24 block (`.?`, `.+`, `.*` modifiers work per t/var-name.t)
- [ ] roast/S02-names/our.t
- [ ] roast/S02-names/pseudo-6d.t
- [ ] roast/S02-names/pseudo-6e.t
- [ ] roast/S02-names/SETTING-6e.t
- [ ] roast/S02-names/strict.t
- [ ] roast/S02-names/symbolic-deref.t
- [ ] roast/S02-names-vars/contextual.t
- [ ] roast/S02-names-vars/fmt.t
- [ ] roast/S02-names-vars/list_array_perl.t
- [ ] roast/S02-names-vars/names.t
- [ ] roast/S02-names-vars/perl.t
- [ ] roast/S02-names-vars/signature.t
- [ ] roast/S02-names-vars/variables-and-packages.t
- [ ] roast/S02-names-vars/varnames.t
- [x] roast/S02-one-pass-parsing/less-than.t
- [x] roast/S02-one-pass-parsing/misc.t
- [ ] roast/S02-packages/package-lookup.t
- [ ] roast/S02-types/anon_block.t
- [ ] roast/S02-types/array_extending.t
- [ ] roast/S02-types/array_ref.t
- [ ] roast/S02-types/array-shapes.t
- [ ] roast/S02-types/array.t
  - 7/108 pass (tests 16,24,27,32,49,50,51). Crashes at test 54 with "is expects right".
  - Blockers: `use lib $*PROGRAM.parent(2).add:` not supported (Test::Util unavailable), `$(...)` / `$[...]` itemization syntax missing, `*-1` WhateverCode in indices missing, `@array.[0]` dot indexing missing, postfix `for` treats comma list as single item, `.raku` not implemented for arrays.
- [ ] roast/S02-types/assigning-refs.t
- [ ] roast/S02-types/autovivification.t
- [ ] roast/S02-types/baggy.t
- [ ] roast/S02-types/baghash.t
- [ ] roast/S02-types/bag-iterator.t
- [ ] roast/S02-types/bag.t
- [ ] roast/S02-types/bool.t
  - ~28/69 pass. Failures: `.raku` method (tests 23-24), `True` numifies to wrong type (test 25), `++`/`--` on Bool (tests 29-32), `.but` mixin (tests 34, 36), `.key` method (tests 37-38), `Bool.pick(*)` (test 40), `Bool.roll(*)` (test 43), `Bool ~~ Int` (test 45), `Bool:U` type smiley checks (tests 47-48)
- [ ] roast/S02-types/built-in.t
- [ ] roast/S02-types/capture.t
- [ ] roast/S02-types/catch_type_cast_mismatch.t
- [ ] roast/S02-types/compact.t
- [ ] roast/S02-types/declare.t
- [x] roast/S02-types/fatrat.t
  - 1/1 pass.
- [ ] roast/S02-types/flattening.t
- [ ] roast/S02-types/generics.t
  - `use nqp;` fatal (`Module not found: nqp`) is fixed by treating `nqp` as a pragma/no-op.
  - Current blocker: generic nominalized method dispatch fails (`Unknown method value dispatch: t-nominalizables`).
- [ ] roast/S02-types/hash_ref.t
- [ ] roast/S02-types/hash.t
  - 94/112 pass (111 reached). Remaining failures:
  - Tests 13-15: `${}` anonymous hash ref syntax, map with .WHAT.gist
  - Tests 63-64: Character ranges (`'a'..'d'`) not yet supported
  - Test 65: `throws-like` with `EVAL` and `@%(...)` syntax
  - Test 68: Class with custom postcircumfix:<{ }> method
  - Tests 79-80: `$/` and `$0` regex match variables as hash keys
  - Test 83: Auto-vivification through binding
  - Tests 88-92: Positional indexing on Hash, `item()`, throws-like with message matching
  - Tests 107-108: Mixins with `but` operator on hashes
- [ ] roast/S02-types/hyperwhatever.t
- [ ] roast/S02-types/infinity.t
  - 11/21 pass (1-8, 10, 12-13). Good Inf support. Failures: `truncate(Inf)` (9), assigning Inf to Int error msg (11), only 13 tests reached (runtime error after test 13). Difficulty: Low-Medium
- [ ] roast/S02-types/instants-and-durations.t
- [ ] roast/S02-types/int-uint.t
- [ ] roast/S02-types/isDEPRECATED.t
- [ ] roast/S02-types/is-type.t
- [ ] roast/S02-types/lazy-lists.t
  - Panic fixed (2026-02-14): `.splice` with start beyond array end no longer crashes. Current status: 14/27 pass; remaining failures at 1, 4-7, 9, 11, 13, 15, 21-23, 27.
- [ ] roast/S02-types/lists.t
- [ ] roast/S02-types/list.t
- [ ] roast/S02-types/mixed_multi_dimensional.t
- [ ] roast/S02-types/mixhash.t
- [ ] roast/S02-types/mix-iterator.t
- [ ] roast/S02-types/mix.t
- [ ] roast/S02-types/multi_dimensional_array.t
- [ ] roast/S02-types/mu.t
- [x] roast/S02-types/nan.t
- [ ] roast/S02-types/native.t
- [ ] roast/S02-types/nested_arrays.t
- [ ] roast/S02-types/nested_pairs.t
- [ ] roast/S02-types/nil.t
  - ~14/67 pass. Failures: `return_nil() === Nil` identity (test 15), `.raku` on Nil (test 16), variable holding nil defined check (test 18), subset type assignment (test 26), mandatory param with Nil (test 28), optional param Nil handling (tests 29-30)
- [ ] roast/S02-types/nominalizables.t
- [ ] roast/S02-types/num.t
  - 0/? pass. Parser panic (stack overflow) before any tests run. Likely complex parsing constructs in test file. Difficulty: High
- [ ] roast/S02-types/pair.t
  - 67/182 pass (103 reached). Pair creation, colonpairs, nested pairs, boolean pairs (:foo, :!foo), and pair usage in for/sub contexts work well. Failures: `.key`/`.value` method calls (2-7), list context element count (8-11, 14-19), nested key/value (31-32), hash stringification (34), sub arg passing (46-47). Many tests not reached. Difficulty: Medium
- [x] roast/S02-types/parsing-bool.t
  - 4/4 pass.
- [ ] roast/S02-types/range-iterator.t
- [ ] roast/S02-types/range.t
  - ~20/259 pass. Failures: `.raku` for `^..` and `^..^` ranges (tests 5,7), Range-to-array reification (tests 8,11,13), `.reverse.raku` (test 17), numification of ranges (tests 32,35-43)
- [ ] roast/S02-types/resolved-in-setting.t
- [ ] roast/S02-types/sethash.t
- [ ] roast/S02-types/set-iterator.t
- [ ] roast/S02-types/set.t
  - 0/248 pass. Program silently aborts on `dies-ok { $s<a> = True }` because the parser does not support subscript assignment (`$expr<key> = value`). Other blockers: `set <a b foo>` listop syntax without parens is parsed as comparison (not function call), `.default` method not implemented on Set, many Set-specific methods missing (`.raku`, `.total`, `.roll`, `.pick`, `.grab`, `.kv`, `.fmt`, `.minpairs`, `.maxpairs`, parameterized `Set[Str]`, `is Set` trait, etc.)
- [ ] roast/S02-types/sigils-and-types.t
- [ ] roast/S02-types/signed-unsigned-native.t
- [ ] roast/S02-types/stash.t
- [ ] roast/S02-types/subscripts_and_context.t
- [ ] roast/S02-types/subset-6e.t
- [ ] roast/S02-types/type.t
- [ ] roast/S02-types/undefined-types.t
- [ ] roast/S02-types/unicode.t
- [ ] roast/S02-types/version-stress.t
- [ ] roast/S02-types/version.t
  - 10/45 pass (only 10 reached). Version literals and comparisons work. Tests 1-10 pass (literal parsing, cmp, eqv, Version.new). Stopped early, likely syntax issue after test 10. Difficulty: Low-Medium
- [ ] roast/S02-types/whatever.t
  - ~9/131 pass. Failures: Whatever type constraint (test 2), `*-1` as Code (test 5), WhateverCode execution (test 7), `*.meth` closure (test 13), `*.uc eq $str` Callable creation (tests 15-16), `@a[1..*]` slicing (test 18)
- [ ] roast/S02-types/WHICH.t
